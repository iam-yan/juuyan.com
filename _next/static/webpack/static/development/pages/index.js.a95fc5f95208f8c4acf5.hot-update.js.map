{"version":3,"file":"static/webpack/static/development/pages/index.js.a95fc5f95208f8c4acf5.hot-update.js","sources":["webpack:///./components/story/projectionRoom.tsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { CursorSetterRef, ProgressSetterRef } from '../types';\nimport { AppContext } from '../appContext';\nimport { stories } from './config/stories';\n\ninterface Props {\n  index: number;\n  berthLineProgress?: number;\n  cursorSetterRef?: CursorSetterRef;\n  progressSetterRef?: ProgressSetterRef;\n}\n\nexport const ProjectionRoom: React.FC<Props> = ({\n  index,\n  berthLineProgress,\n  cursorSetterRef,\n  progressSetterRef,\n}) => {\n  const { bg, slogan } = stories[index].env;\n\n  const { cursorCoordRef } = useContext(AppContext);\n  const [progress, setProgress] = useState(0);\n  const [cursorCoord, setCursor] = useState(cursorCoordRef.current);\n  const normalizedProgress = progress / berthLineProgress;\n  const clipPath =\n    progressSetterRef === undefined\n      ? 'circle(100%) at 50% 50%'\n      : `circle(${normalizedProgress * 100}% at calc(50% + (${cursorCoord.x}px - 50%) * ${Math.max(\n          0,\n          1 - normalizedProgress\n        )}) calc(50% + (${cursorCoord.y}px - 50%) * ${Math.max(0, 1 - normalizedProgress)}))`;\n\n  useEffect(() => {\n    if (progressSetterRef !== undefined) {\n      progressSetterRef.current = (p) => setProgress(p);\n      cursorSetterRef.current = (x, y) => {\n        setCursor({ x, y });\n      };\n      return () => {\n        if (progressSetterRef !== undefined) setProgress(1);\n        // progressSetterRef.current = (p) => {};\n        // cursorSetterRef.current = (x, y) => {};\n      };\n    }\n  }, [progressSetterRef]);\n\n  return (\n    <div\n      className=\"fixed inset-0 z-back\"\n      style={{\n        clipPath,\n      }}\n    >\n      <div\n        className=\"fixed inset-0 text-center flex justify-center items-center z-back\"\n        style={{ padding: '80px', background: bg }}\n      >\n        <h1 className=\"type-display text-inverse capitalize\">{slogan}</h1>\n      </div>\n    </div>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AASA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AACA;AAQA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AADA;AACA;AAEA;AACA;AAEA;AAHA;AAKA;AAXA;AAcA;AAEA;AACA;AACA;AADA;AAFA;AAOA;AACA;AAAA;AAAA;AAAA;AAFA;AAIA;AAAA;AA7CA;;;;A","sourceRoot":""}